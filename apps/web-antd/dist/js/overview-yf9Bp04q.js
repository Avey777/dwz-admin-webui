var D=(T,b,a)=>new Promise((v,x)=>{var m=r=>{try{g(a.next(r))}catch(e){x(e)}},p=r=>{try{g(a.throw(r))}catch(e){x(e)}},g=r=>r.done?v(r.value):Promise.resolve(r.value).then(m,p);g((a=a.apply(T,b)).next())});import{X as S,bN as U,bu as J}from"./bootstrap-8TZEei42.js";import{$ as K,a4 as O,b1 as $,P as V,J as q,a9 as X,aa as G,ab as _,ac as u,aB as t,x as c,a7 as n,aj as d,av as y,F as z,aC as H,ai as Q}from"../jse/index-index-Bfp9fVLj.js";import{C as f}from"./index-sAHdq1L4.js";import{U as W,E as L,a as Y}from"./user-round-pen-DDLU9TXc.js";import{S as Z}from"./settings-BbHHUqin.js";import{B as tt}from"./book-open-text-D6rayHnk.js";import{T as et}from"./index-BfQKXdoT.js";import{_ as st}from"./page.vue_vue_type_script_setup_true_lang-BY0axxjX.js";import{R as P}from"./rotate-cw-CKxy7Mi1.js";import"./index-d0SnXsRb.js";import"./shallowequal-NoPM3EZB.js";import"./Trigger-DOqqEP9A.js";import"./ResizeObserver.es-CDE7jhPe.js";import"./_arrayIncludes-B8uzE354.js";import"./Overflow-bo4x4DTi.js";import"./index-D27JxLQ4.js";import"./index-B4u-ZZTz.js";import"./colors-BPXzNSR4.js";import"./collapseMotion-B5MEdO-q.js";import"./slide-CIRZRFAB.js";import"./useRefs-qMOa5Z2N.js";import"./hasIn-DZ2VGsD9.js";import"./isMobile-8sZ0LT6r.js";import"./useMergedState-D4hu3SXC.js";import"./isPlainObject-C6CdBuZO.js";var B={exports:{}},ot=B.exports,A;function at(){return A||(A=1,function(T,b){(function(a,v){T.exports=v()})(ot,function(){return function(a,v,x){a=a||{};var m=v.prototype,p={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function g(e,s,i,o){return m.fromToBase(e,s,i,o)}x.en.relativeTime=p,m.fromToBase=function(e,s,i,o,l){for(var M,j,C,N=i.$locale().relativeTime||p,E=a.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],I=E.length,w=0;w<I;w+=1){var h=E[w];h.d&&(M=o?x(e).diff(i,h.d,!0):i.diff(e,h.d,!0));var k=(a.rounding||Math.round)(Math.abs(M));if(C=M>0,k<=h.r||!h.r){k<=1&&w>0&&(h=E[w-1]);var F=N[h.l];l&&(k=l(""+k)),j=typeof F=="string"?F.replace("%d",k):F(k,s,h.l,C);break}}if(s)return j;var R=C?N.future:N.past;return typeof R=="function"?R(j):R.replace("%s",j)},m.to=function(e,s){return g(e,s,this,!0)},m.from=function(e,s){return g(e,s,this)};var r=function(e){return e.$u?x.utc():x()};m.toNow=function(e){return this.to(r(this),e)},m.fromNow=function(e){return this.from(r(this),e)}}})}(B)),B.exports}var it=at();const rt=K(it),lt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},nt={class:"flex flex-col items-center"},dt={class:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-3"},ct={class:"text-2xl font-bold text-gray-800 mb-1"},ut={class:"text-xs text-green-600 mt-1"},mt={class:"flex flex-col items-center"},xt={class:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mb-3"},_t={class:"text-2xl font-bold text-gray-800 mb-1"},ft={class:"text-xs text-blue-600 mt-1"},vt={class:"flex flex-col items-center"},pt={class:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mb-3"},gt={class:"text-2xl font-bold text-gray-800 mb-1"},ht={class:"text-xs text-purple-600 mt-1"},yt={class:"flex flex-col items-center"},bt={class:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center mb-3"},kt={class:"text-2xl font-bold text-gray-800 mb-1"},wt={class:"text-xs text-orange-600 mt-1"},Tt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6"},jt={key:0,class:"space-y-3"},Bt={class:"flex-1 min-w-0"},Mt={class:"text-sm font-medium text-gray-900 truncate"},Ct={class:"text-xs text-gray-500"},Nt={key:1,class:"text-center py-8 text-gray-500"},Et={key:0,class:"space-y-3"},Ft={class:"flex-shrink-0 w-6 h-6 rounded bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-xs font-bold"},Rt={class:"flex-1 min-w-0"},$t={class:"text-sm font-medium text-gray-900 truncate"},Dt={class:"text-xs text-gray-500 truncate"},St={class:"flex-shrink-0 text-right"},Ut={class:"text-sm font-bold text-blue-600"},Vt={key:1,class:"text-center py-8 text-gray-500"},qt={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},zt={class:"space-y-3"},Ht={class:"flex justify-between items-center"},Lt={class:"font-semibold"},Pt={class:"flex justify-between items-center"},At={class:"font-semibold text-green-600"},It={class:"space-y-3"},Jt={class:"flex justify-between items-center"},Kt={class:"font-semibold"},Ot={class:"flex justify-between items-center"},Xt={class:"font-semibold text-green-600"},Gt={class:"space-y-3"},Qt={class:"flex justify-between items-center"},Wt={class:"flex justify-between items-center"},Yt={class:"text-xs text-gray-500"},Zt=O({__name:"overview",setup(T){$.extend(rt);const b=V(!1),a=V(null),v=q(()=>{var e;const r=(e=a.value)==null?void 0:e.statistics;return r?r.active_users>0&&r.total_clicks>0?{color:"green",text:"正常"}:r.total_users>0?{color:"orange",text:"低活跃"}:{color:"red",text:"异常"}:{color:"default",text:"未知"}}),x=q(()=>$().format("HH:mm:ss")),m=()=>D(null,null,function*(){b.value=!0;try{a.value={statistics:{total_users:0,active_users:0,total_short_links:0,total_clicks:0,today_clicks:0,week_clicks:0,month_clicks:0,total_domains:0,active_domains:0,total_ab_tests:0,running_ab_tests:0,total_tokens:0,active_tokens:0},recent_activities:[],top_links:[]},U.info("当前为演示数据，统计接口暂未实现")}catch(r){console.error("Failed to load dashboard data:",r),U.error("加载仪表板数据失败")}finally{b.value=!1}}),p=r=>r>=1e6?(r/1e6).toFixed(1)+"M":r>=1e3?(r/1e3).toFixed(1)+"K":r.toString(),g=r=>$(r).fromNow();return X(()=>{m()}),(r,e)=>(_(),G(n(st),{description:"系统运行状况总览，包括关键指标、近期活动和热门链接等信息",title:"系统概览"},{default:u(()=>[t("div",lt,[c(n(f),{class:"text-center"},{default:u(()=>{var s,i,o,l;return[t("div",nt,[t("div",dt,[c(n(W),{class:"w-6 h-6 text-blue-600"})]),t("div",ct,d(((i=(s=a.value)==null?void 0:s.statistics)==null?void 0:i.total_users)||0),1),e[0]||(e[0]=t("div",{class:"text-sm text-gray-500"},"总用户数",-1)),t("div",ut," 活跃: "+d(((l=(o=a.value)==null?void 0:o.statistics)==null?void 0:l.active_users)||0),1)])]}),_:1}),c(n(f),{class:"text-center"},{default:u(()=>{var s,i,o,l;return[t("div",mt,[t("div",xt,[c(n(L),{class:"w-6 h-6 text-green-600"})]),t("div",_t,d(((i=(s=a.value)==null?void 0:s.statistics)==null?void 0:i.total_short_links)||0),1),e[1]||(e[1]=t("div",{class:"text-sm text-gray-500"},"短链接数",-1)),t("div",ft," 今日: "+d(((l=(o=a.value)==null?void 0:o.statistics)==null?void 0:l.today_clicks)||0)+" 次点击 ",1)])]}),_:1}),c(n(f),{class:"text-center"},{default:u(()=>{var s,i,o,l;return[t("div",vt,[t("div",pt,[c(n(Y),{class:"w-6 h-6 text-purple-600"})]),t("div",gt,d(p(((i=(s=a.value)==null?void 0:s.statistics)==null?void 0:i.total_clicks)||0)),1),e[2]||(e[2]=t("div",{class:"text-sm text-gray-500"},"总点击量",-1)),t("div",ht," 本月: "+d(p(((l=(o=a.value)==null?void 0:o.statistics)==null?void 0:l.month_clicks)||0)),1)])]}),_:1}),c(n(f),{class:"text-center"},{default:u(()=>{var s,i,o,l;return[t("div",yt,[t("div",bt,[c(n(Z),{class:"w-6 h-6 text-orange-600"})]),t("div",kt,d(((i=(s=a.value)==null?void 0:s.statistics)==null?void 0:i.total_ab_tests)||0),1),e[3]||(e[3]=t("div",{class:"text-sm text-gray-500"},"AB测试",-1)),t("div",wt," 运行中: "+d(((l=(o=a.value)==null?void 0:o.statistics)==null?void 0:l.running_ab_tests)||0),1)])]}),_:1})]),t("div",Tt,[c(n(f),{title:"近期活动",loading:b.value},{extra:u(()=>[c(n(S),{size:"small",onClick:m},{default:u(()=>[c(n(P),{class:"w-4 h-4"})]),_:1})]),default:u(()=>{var s,i;return[(i=(s=a.value)==null?void 0:s.recent_activities)!=null&&i.length?(_(),y("div",jt,[(_(!0),y(z,null,H(a.value.recent_activities.slice(0,10),o=>(_(),y("div",{key:o.id,class:"flex items-start space-x-3 p-3 hover:bg-gray-50 rounded-lg transition-colors"},[e[4]||(e[4]=t("div",{class:"flex-shrink-0 w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center"},[t("div",{class:"w-2 h-2 bg-blue-600 rounded-full"})],-1)),t("div",Bt,[t("p",Mt,d(o.description),1),t("p",Ct,d(o.user)+" · "+d(g(o.created_at)),1)])]))),128))])):(_(),y("div",Nt,[c(n(tt),{class:"w-8 h-8 mx-auto mb-2"}),e[5]||(e[5]=t("p",null,"暂无近期活动",-1))]))]}),_:1},8,["loading"]),c(n(f),{title:"热门链接",loading:b.value},{extra:u(()=>[c(n(S),{size:"small",onClick:m},{default:u(()=>[c(n(P),{class:"w-4 h-4"})]),_:1})]),default:u(()=>{var s,i;return[(i=(s=a.value)==null?void 0:s.top_links)!=null&&i.length?(_(),y("div",Et,[(_(!0),y(z,null,H(a.value.top_links.slice(0,10),(o,l)=>(_(),y("div",{key:o.id,class:"flex items-center space-x-3 p-3 hover:bg-gray-50 rounded-lg transition-colors"},[t("div",Ft,d(l+1),1),t("div",Rt,[t("p",$t,d(o.title||o.original_url),1),t("p",Dt,d(o.short_url),1)]),t("div",St,[t("p",Ut,d(p(o.click_count)),1),e[6]||(e[6]=t("p",{class:"text-xs text-gray-500"},"点击",-1))])]))),128))])):(_(),y("div",Vt,[c(n(L),{class:"w-8 h-8 mx-auto mb-2"}),e[7]||(e[7]=t("p",null,"暂无链接数据",-1))]))]}),_:1},8,["loading"])]),t("div",qt,[c(n(f),{title:"域名状态"},{default:u(()=>{var s,i,o,l;return[t("div",zt,[t("div",Ht,[e[8]||(e[8]=t("span",{class:"text-sm text-gray-600"},"总域名数",-1)),t("span",Lt,d(((i=(s=a.value)==null?void 0:s.statistics)==null?void 0:i.total_domains)||0),1)]),t("div",Pt,[e[9]||(e[9]=t("span",{class:"text-sm text-gray-600"},"活跃域名",-1)),t("span",At,d(((l=(o=a.value)==null?void 0:o.statistics)==null?void 0:l.active_domains)||0),1)])])]}),_:1}),c(n(f),{title:"Token状态"},{default:u(()=>{var s,i,o,l;return[t("div",It,[t("div",Jt,[e[10]||(e[10]=t("span",{class:"text-sm text-gray-600"},"总Token数",-1)),t("span",Kt,d(((i=(s=a.value)==null?void 0:s.statistics)==null?void 0:i.total_tokens)||0),1)]),t("div",Ot,[e[11]||(e[11]=t("span",{class:"text-sm text-gray-600"},"活跃Token",-1)),t("span",Xt,d(((l=(o=a.value)==null?void 0:o.statistics)==null?void 0:l.active_tokens)||0),1)])])]}),_:1}),c(n(f),{title:"系统状态"},{default:u(()=>[t("div",Gt,[t("div",Qt,[e[12]||(e[12]=t("span",{class:"text-sm text-gray-600"},"系统状态",-1)),c(n(et),{color:v.value.color},{default:u(()=>[Q(d(v.value.text),1)]),_:1},8,["color"])]),t("div",Wt,[e[13]||(e[13]=t("span",{class:"text-sm text-gray-600"},"最后检查",-1)),t("span",Yt,d(x.value),1)])])]),_:1})])]),_:1}))}}),Be=J(Zt,[["__scopeId","data-v-34fe1416"]]);export{Be as default};
